<p class="description">
  Укажите, какие уведомления отправлять автору задачи
</p>

<div>
  Скопировать значения со вкладки
  <%= select_tag 'r', options_for_select(%w(assigned_to watchers telegram_groups).collect{ |r| [l("intouch.recipient.#{r}"), r] }) %>
  <%= button_tag 'Скопировать', class: 'copySettingsFromOtherTab' %>
</div>
<br>
<table>
  <thead>
  <tr>
    <th>Статус \ Приоритет</th>
    <% IssuePriority.order(:position).each do |priority| %>
      <th><%= priority.name %></th>
    <% end %>
  </tr>
  </thead>
  <tbody>
  <% IssueStatus.order(:position).each do |status| %>
    <tr>
      <th>
        <%= status.name %>
      </th>
      <% IssuePriority.order(:position).each do |priority| %>
        <td>
          <% %w(telegram email).each do |protocol| %>
            <%= check_box_tag "intouch_settings[#{protocol}_settings][author][#{status.id}][]", priority.id,
                              settings_source.send("#{protocol}_settings").try(:[], 'author').
                                  try(:[], status.id.to_s).try(:include?, priority.id.to_s),
                                  class: "#{protocol}_#{status.id}_#{priority.id}" %>
            <%= label_tag l "intouch.protocol.#{protocol}" %><br>
          <% end %>
        </td>
      <% end %>
    </tr>


  <% end %>
  </tbody>
</table>
